#include <iostream>
#include <fstream>
#include <string>
#include <vector>
using namespace std;

//==================== HASH TABLE ====================

struct HashTable {
    vector<vector<string>> buckets;
    int capacity;
    int elementCount;

    HashTable(int cap = 1000) {
        capacity = cap;
        elementCount = 0;
        buckets.resize(capacity);
    }

    void insertWord(const string& word, int hashType) {
        string key;
        for (char ch : word) {
            if (ch >= 'A' && ch <= 'Z')
                key += ch + ('a' - 'A');   // to lowercase
            else
                key += ch;
        }

        int index = 0;
        switch (hashType) {
            case 2:
                index = key.length() > 1
                        ? (key[0] - 'a') * 26 + (key[1] - 'a')
                        : (key[0] - 'a');
                break;
            case 3:
                for (char ch : key)
                    index += (ch - 'a');
                break;
            case 4:
                index = key.length();
                break;
            default:
                index = key[0] - 'a';
        }

        index %= capacity; // safety
        buckets[index].push_back(word);
        elementCount++;
    }

    void writeToFile(const string& filename) const {
        if (elementCount == 0) return;

        ofstream out(filename);
        if (!out) {
            cerr << "Cannot open file: " << filename << endl;
            return;
        }

        for (int i = 0; i < capacity; i++) {
            if (buckets[i].empty()) continue;
            out << i << ": ";
            for (const string& w : buckets[i])
                out << w << "; ";
            out << "\n\n";
        }

        out.close();
    }
};

//==================== MAIN ====================

int main() {
    HashTable CBHT1, CBHT2, CBHT3, CBHT4;

    ifstream input("words.txt");
    if (!input.is_open()) {
        cerr << "Error opening words.txt" << endl;
        return 1;
    }

    string word;
    while (input >> word) {
        CBHT1.insertWord(word, 1);
        CBHT2.insertWord(word, 2);
        CBHT3.insertWord(word, 3);
        CBHT4.insertWord(word, 4);
    }

    input.close();

    CBHT1.writeToFile("CBHT1.txt");
    CBHT2.writeToFile("CBHT2.txt");
    CBHT3.writeToFile("CBHT3.txt");
    CBHT4.writeToFile("CBHT4.txt");

    return 0;
}
